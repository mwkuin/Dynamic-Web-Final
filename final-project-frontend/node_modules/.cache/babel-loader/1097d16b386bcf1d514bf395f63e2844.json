{"ast":null,"code":"import _slicedToArray from\"/Users/morgankuin/Documents/GitHub/Dynamic-Web-Final/final-project-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Route,BrowserRouter as Router,Redirect}from'react-router-dom';import*as firebase from'firebase/app';import\"firebase/auth\";//Pages\nimport CreateAccount from\"./pages/CreateAccount\";import Header from\"./components/Header\";import Home from\"./pages/Home\";import Login from\"./pages/Login\";import SinglePost from\"./pages/SinglePost\";//Styles\nimport'./App.css';function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setLoggedIn=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),userInfo=_useState6[0],setUserInfo=_useState6[1];//Config\nvar firebaseConfig={apiKey:\"AIzaSyCLBJ4w65_RjpE54Sq9ujOtlBRVFIeG6AY\",authDomain:\"final-project-37ede.firebaseapp.com\",databaseURL:\"https://final-project-37ede.firebaseio.com\",projectId:\"final-project-37ede\",storageBucket:\"final-project-37ede.appspot.com\",messagingSenderId:\"200354381478\",appId:\"1:200354381478:web:9450e6350274fc268f3e67\"};//ensure app is initialized when it is ready to be\nuseEffect(function(){//ensure app is not initialized more than once\n//is firebase already initialized?\nif(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}//Setting auth to be persistent in SESSION storage, not cookies\n//You can also use cookies with firebase but we're using session\n//because it is easier to work with\nfirebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION).catch(function(e){console.log('AUTH ERROR',e);});},[firebaseConfig]);//Check to see if user is logged in\n//User loads page, check status -> set state accordingly\nuseEffect(function(){firebase.auth().onAuthStateChanged(function(user){if(user){//Logged in\nsetUserInfo(user);setLoggedIn(true);}else{//Not logged in\nsetUserInfo({});setLoggedIn(false);}setLoading(false);});},[]);//Login\nfunction LoginFunction(e){e.preventDefault();var email=e.currentTarget.loginEmail.value;var password=e.currentTarget.loginPassword.value;firebase.auth().signInWithEmailAndPassword(email,password).then(function(response){console.log(\"LOGIN RESPONSE\",response);setLoggedIn(true);}).catch(function(error){console.log(\"LOGIN ERROR\",error);});}//Logout\nfunction LogoutFunction(){firebase.auth().signOut().then(function(){setLoggedIn(false);}).catch(function(error){console.log(\"LOGOUT ERROR\",error);});}function CreateAccountFunction(e){e.preventDefault();console.log('form payload',e);//default values for testing\nvar email=e.currentTarget.createEmail.value;var password=e.currentTarget.createPassword.value;firebase.auth().createUserWithEmailAndPassword(email,password).then(function(response){console.log('VALID ACCOUNT CREATE',response);setLoggedIn(true);}).catch(function(e){console.log(\"CREATE ACCOUNT ERROR\",e);});}if(loading)return null;return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Header,{LogoutFunction:LogoutFunction,isLoggedIn:loggedIn}),/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},!loggedIn?/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"}):/*#__PURE__*/React.createElement(Home,{userInfo:userInfo})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/post/:id\"},!loggedIn?/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"}):/*#__PURE__*/React.createElement(SinglePost,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/login\"},!loggedIn?/*#__PURE__*/React.createElement(Login,{LoginFunction:LoginFunction}):/*#__PURE__*/React.createElement(Redirect,{to:\"/\"})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/create-account\"},!loggedIn?/*#__PURE__*/React.createElement(CreateAccount,{CreateAccountFunction:CreateAccountFunction}):/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}))));}export default App;","map":{"version":3,"sources":["/Users/morgankuin/Documents/GitHub/Dynamic-Web-Final/final-project-frontend/src/App.js"],"names":["React","useEffect","useState","Route","BrowserRouter","Router","Redirect","firebase","CreateAccount","Header","Home","Login","SinglePost","App","loggedIn","setLoggedIn","loading","setLoading","userInfo","setUserInfo","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","apps","length","initializeApp","auth","setPersistence","Auth","Persistence","SESSION","catch","e","console","log","onAuthStateChanged","user","LoginFunction","preventDefault","email","currentTarget","loginEmail","value","password","loginPassword","signInWithEmailAndPassword","then","response","error","LogoutFunction","signOut","CreateAccountFunction","createEmail","createPassword","createUserWithEmailAndPassword"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Route, BrowserRouter as Router, Redirect } from 'react-router-dom';\nimport * as firebase from 'firebase/app';\nimport \"firebase/auth\";\n\n//Pages\nimport CreateAccount from \"./pages/CreateAccount\";\nimport Header from \"./components/Header\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport SinglePost from \"./pages/SinglePost\";\n\n\n//Styles\nimport './App.css';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [userInfo, setUserInfo] = useState({});\n\n//Config\n  const firebaseConfig = {\n      apiKey: \"AIzaSyCLBJ4w65_RjpE54Sq9ujOtlBRVFIeG6AY\",\n      authDomain: \"final-project-37ede.firebaseapp.com\",\n      databaseURL: \"https://final-project-37ede.firebaseio.com\",\n      projectId: \"final-project-37ede\",\n      storageBucket: \"final-project-37ede.appspot.com\",\n      messagingSenderId: \"200354381478\",\n      appId: \"1:200354381478:web:9450e6350274fc268f3e67\"\n    };\n\n    //ensure app is initialized when it is ready to be\n    useEffect(() => {\n      //ensure app is not initialized more than once\n      //is firebase already initialized?\n      if(!firebase.apps.length) {\n        firebase.initializeApp(firebaseConfig);\n      }\n    //Setting auth to be persistent in SESSION storage, not cookies\n    //You can also use cookies with firebase but we're using session\n    //because it is easier to work with\n    firebase\n      .auth()\n      .setPersistence(firebase.auth.Auth.Persistence.SESSION)\n      .catch(function(e) {\n        console.log('AUTH ERROR', e);\n      });\n    }, [firebaseConfig]);\n\n\n    //Check to see if user is logged in\n    //User loads page, check status -> set state accordingly\n    useEffect(() => {\n      firebase.auth().onAuthStateChanged(function (user) {\n      if(user) {\n        //Logged in\n        setUserInfo(user);\n        setLoggedIn(true);\n      } else {\n        //Not logged in\n        setUserInfo({});\n        setLoggedIn(false);\n      }\n        setLoading(false);\n      });\n      }, []);\n\n      //Login\n      function LoginFunction(e) {\n        e.preventDefault();\n        let email = e.currentTarget.loginEmail.value;\n        let password = e.currentTarget.loginPassword.value;\n\n        firebase\n        .auth()\n        .signInWithEmailAndPassword(email, password)\n        .then(function(response) {\n          console.log(\"LOGIN RESPONSE\", response);\n          setLoggedIn(true);\n        })\n        .catch(function(error) {\n          console.log(\"LOGIN ERROR\", error)\n        });\n      }\n\n      //Logout\n      function LogoutFunction() {\n        firebase\n          .auth()\n          .signOut()\n          .then(function() {\n            setLoggedIn(false);\n          })\n          .catch(function(error) {\n            console.log(\"LOGOUT ERROR\", error);\n          });\n      }\n\n      function CreateAccountFunction(e) {\n        e.preventDefault();\n        console.log('form payload', e);\n\n        //default values for testing\n        let email = e.currentTarget.createEmail.value;\n        let password = e.currentTarget.createPassword.value;\n\n\n        firebase\n          .auth()\n          .createUserWithEmailAndPassword(email, password)\n          .then(function(response) {\n            console.log('VALID ACCOUNT CREATE', response);\n            setLoggedIn(true);\n          })\n          .catch(function(e) {\n            console.log(\"CREATE ACCOUNT ERROR\", e);\n          });\n\n      }\n      if (loading) return null;\n\n  return (\n    <div className=\"App\">\n      <Header LogoutFunction={LogoutFunction} isLoggedIn={loggedIn}/>\n      <Router>\n        <Route exact path=\"/\">\n          {!loggedIn ? (<Redirect to=\"/login\"/> ) : (<Home userInfo={userInfo}/>)}\n        </Route>\n        <Route exact path=\"/post/:id\">\n          {!loggedIn ? (<Redirect to=\"/login\"/> ) : (<SinglePost/>)}\n        </Route>\n        <Route exact path=\"/login\">\n          {!loggedIn ? (<Login LoginFunction={LoginFunction}/> ) : (<Redirect to=\"/\"/>)}\n        </Route>\n\n        <Route exact path=\"/create-account\">\n          {!loggedIn ? (<CreateAccount CreateAccountFunction={CreateAccountFunction} />) : (<Redirect to=\"/\" />)}\n        </Route>\n      </Router>\n\n\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}